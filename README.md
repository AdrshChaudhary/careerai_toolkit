# Firebase Studio

This is a NextJS starter created in Firebase Studio.

## Getting Started (Frontend)

To get this project's frontend running on your local machine, follow these steps:

### 1. Install Dependencies

First, you need to install the project dependencies using npm:

```bash
npm install
```

### 2. Set Up Environment Variables

This project requires Firebase credentials to connect to your Firebase project for user authentication.

1.  Create a new file named `.env.local` in the root of the project.
2.  Add the following environment variables to the `.env.local` file, replacing the placeholder values with your actual Firebase project credentials. You can get these from the Firebase console in your project settings.

    ```
    NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key
    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-auth-domain
    NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-storage-bucket
    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-messaging-sender-id
    NEXT_PUBLIC_FIREBASE_APP_ID=your-app-id
    ```

### 3. Run the Development Server

Once the dependencies are installed and the environment variables are set, you can start the development server:

```bash
npm run dev
```

This will start the application, and you can view it in your browser at [http://localhost:9002](http://localhost:9002).

---

## Backend Implementation Guide

The frontend is currently using mock data. Follow these steps to implement the Python backend and connect it to the frontend.

### 1. Set Up the Python Backend Environment

First, create a directory for your backend code and set up the necessary files.

1.  **Create a `backend` directory** in the root of your project.
2.  Inside the `backend` directory, create a file named `requirements.txt` and add the following dependencies:

    ```txt
    # backend/requirements.txt
    fastapi
    uvicorn[standard]
    python-multipart
    pydantic
    PyMuPDF
    google-generativeai
    ```

3.  Install these packages using pip:

    ```bash
    pip install -r backend/requirements.txt
    ```

4.  Inside the `backend` directory, create a file named `main.py`. This is where you will place the Python code generated by the AI using the prompt from `backend-prompt.md`.

### 2. Run the Backend Server

Once you have the generated Python code in `backend/main.py`, run the FastAPI server from your terminal:

```bash
uvicorn backend.main:app --reload --port 8000
```

The backend server will be available at `http://localhost:8000`.

### 3. Connect the Frontend to the Backend

Now, modify the frontend components to call your Python API endpoints instead of using mock data. Replace the contents of the following files with the code provided below.

#### **File to update: `src/components/dashboard/resume-analyzer-client.tsx`**

This update connects the Resume Analyzer to your `/api/resume-analyzer/...` endpoints.

```tsx
'use client';

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import * as z from 'zod';
import { useAuth } from '@/contexts/auth-context';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Textarea } from '@/components/ui/textarea';
import { Button } from '@/components/ui/button';
import { useToast } from '@/hooks/use-toast';
import { Loader2, Sparkles, FileText, Briefcase, Bot, Lightbulb } from 'lucide-react';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { ScoreGauge } from './score-gauge';
import { Alert, AlertDescription, AlertTitle } from '../ui/alert';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';

const API_BASE_URL = 'http://localhost:8000/api';

const comprehensiveSchema = z.object({
  resume: z.any().refine((files) => files?.length == 1, 'Resume PDF is required.'),
});

const jobDescriptionSchema = z.object({
  resume: z.any().refine((files) => files?.length == 1, 'Resume PDF is required.'),
  jobDescription: z.string().min(50, 'Job description must be at least 50 characters.'),
});

type ComprehensiveFormValues = z.infer<typeof comprehensiveSchema>;
type JobDescriptionFormValues = z.infer<typeof jobDescriptionSchema>;

export function ResumeAnalyzerClient() {
  const [analysisResult, setAnalysisResult] = useState<any | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [activeTab, setActiveTab] = useState('comprehensive');
  const { toast } = useToast();
  const { user } = useAuth();

  const comprehensiveForm = useForm<ComprehensiveFormValues>({
    resolver: zodResolver(comprehensiveSchema),
  });

  const jobDescriptionForm = useForm<JobDescriptionFormValues>({
    resolver: zodResolver(jobDescriptionSchema),
    defaultValues: {
      jobDescription: '',
    },
  });

  async function handleSubmit(endpoint: string, formData: FormData) {
    if (!user) {
      toast({ variant: 'destructive', title: 'You must be logged in.' });
      return;
    }
    setIsLoading(true);
    setAnalysisResult(null);

    try {
      const response = await fetch(`${API_BASE_URL}${endpoint}`, {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        throw new Error('Failed to get analysis from the server.');
      }

      const result = await response.json();
      setAnalysisResult(result);
    } catch (error) {
      toast({
        variant: 'destructive',
        title: 'Analysis Failed',
        description: 'Could not get analysis. Please ensure the backend server is running and try again.',
      });
      setAnalysisResult(null);
    } finally {
      setIsLoading(false);
    }
  }

  async function onComprehensiveSubmit(values: ComprehensiveFormValues) {
    const formData = new FormData();
    formData.append('resume', values.resume[0]);
    await handleSubmit('/resume-analyzer/comprehensive', formData);
  }

  async function onJobDescriptionSubmit(values: JobDescriptionFormValues) {
    const formData = new FormData();
    formData.append('resume', values.resume[0]);
    formData.append('jobDescription', values.jobDescription);
    await handleSubmit('/resume-analyzer/job-description', formData);
  }

  return (
    <div className="flex w-full justify-center">
      <div className="w-full max-w-2xl flex flex-col gap-6">
        <Tabs defaultValue="comprehensive" onValueChange={setActiveTab} className="w-full">
          <Card>
            <TabsList className="grid w-full grid-cols-2 mt-6 mx-auto max-w-[calc(100%-2rem)]">
              <TabsTrigger value="comprehensive">Comprehensive</TabsTrigger>
              <TabsTrigger value="jobDescription">Job Description</TabsTrigger>
            </TabsList>
            <TabsContent value="comprehensive" className="m-0">
              <CardHeader>
                <CardTitle>Comprehensive Analysis</CardTitle>
                <CardDescription>Get a general analysis of your resume's strengths and weaknesses.</CardDescription>
              </CardHeader>
              <CardContent>
                <Form {...comprehensiveForm}>
                  <form onSubmit={comprehensiveForm.handleSubmit(onComprehensiveSubmit)} className="space-y-6">
                    <FormField
                      control={comprehensiveForm.control}
                      name="resume"
                      render={({ field }) => (
                        <FormItem>
                          <FormLabel>Resume PDF</FormLabel>
                          <FormControl>
                            <Input type="file" accept="application/pdf" onChange={(e) => field.onChange(e.target.files)} />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                    <Button type="submit" disabled={isLoading} className="w-full">
                      {isLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <Sparkles className="mr-2 h-4 w-4" />}
                      Analyze Resume
                    </Button>
                  </form>
                </Form>
              </CardContent>
            </TabsContent>
            <TabsContent value="jobDescription" className="m-0">
              <CardHeader>
                <CardTitle>Job Description Based</CardTitle>
                <CardDescription>Analyze your resume against a specific job description for an Overall score.</CardDescription>
              </CardHeader>
              <CardContent>
                <Form {...jobDescriptionForm}>
                  <form onSubmit={jobDescriptionForm.handleSubmit(onJobDescriptionSubmit)} className="space-y-6">
                    <FormField
                      control={jobDescriptionForm.control}
                      name="resume"
                      render={({ field }) => (
                        <FormItem>
                          <FormLabel>Resume PDF</FormLabel>
                          <FormControl>
                            <Input type="file" accept="application/pdf" onChange={(e) => field.onChange(e.target.files)} />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                    <FormField
                      control={jobDescriptionForm.control}
                      name="jobDescription"
                      render={({ field }) => (
                        <FormItem>
                          <FormLabel>Job Description</FormLabel>
                          <FormControl>
                            <Textarea placeholder="Paste the full job description here..." className="min-h-[200px]" {...field} />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                    <Button type="submit" disabled={isLoading} className="w-full">
                      {isLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <Sparkles className="mr-2 h-4 w-4" />}
                      Analyze Resume
                    </Button>
                  </form>
                </Form>
              </CardContent>
            </TabsContent>
          </Card>
        </Tabs>
        
        <Card>
          <CardHeader>
            <CardTitle>Analysis Results</CardTitle>
            <CardDescription>Your resume feedback will appear here.</CardDescription>
          </CardHeader>
          <CardContent>
            {isLoading && (
              <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center">
                <Loader2 className="h-12 w-12 animate-spin text-primary" />
                <p className="text-muted-foreground">Analyzing your resume... This may take a moment.</p>
              </div>
            )}
            {analysisResult ? (
              <div className="space-y-6">
                {analysisResult.score > 0 && (
                  <div className="flex justify-center">
                    <ScoreGauge score={analysisResult.score} />
                  </div>
                )}
                {analysisResult.comprehensiveAnalysis && (
                  <Alert>
                    <Bot className="h-4 w-4" />
                    <AlertTitle>Comprehensive Analysis</AlertTitle>
                    <AlertDescription>{analysisResult.comprehensiveAnalysis}</AlertDescription>
                  </Alert>
                )}
                <Accordion type="single" collapsible defaultValue="summary" className="w-full">
                  <AccordionItem value="summary">
                    <AccordionTrigger>Summary Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.summaryFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="skills">
                    <AccordionTrigger>Skills Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.skillsFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="experience">
                    <AccordionTrigger>Experience Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.experienceFeedback}</AccordionContent>
                  </AccordionItem>
                   <AccordionItem value="projects">
                    <AccordionTrigger>Project Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.projectFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="education">
                    <AccordionTrigger>Education Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.educationFeedback}</AccordionContent>
                  </AccordionItem>
                </Accordion>
                <Alert>
                  <Briefcase className="h-4 w-4" />
                  <AlertTitle>Suggested Job Roles</AlertTitle>
                  <AlertDescription>{analysisResult.jobRoleSuggestions}</AlertDescription>
                </Alert>
                <Alert>
                  <Lightbulb className="h-4 w-4" />
                  <AlertTitle>Overall Suggestions</AlertTitle>
                  <AlertDescription>{analysisResult.overallSuggestions}</AlertDescription>
                </Alert>
              </div>
            ) : !isLoading && (
              <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center">
                <FileText className="h-12 w-12 text-muted-foreground" />
                <p className="text-muted-foreground">Your results will be shown here after analysis.</p>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
```

#### **File to update: `src/components/dashboard/linkedin-optimizer-client.tsx`**

This update connects the LinkedIn Optimizer to your `/api/linkedin-optimizer` endpoint.

```tsx
'use client';

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import * as z from 'zod';
import { useAuth } from '@/contexts/auth-context';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { useToast } from '@/hooks/use-toast';
import { Loader2, Sparkles, Linkedin, Lightbulb } from 'lucide-react';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { ScoreGauge } from './score-gauge';
import { Alert, AlertDescription, AlertTitle } from '../ui/alert';

const API_BASE_URL = 'http://localhost:8000/api';

const formSchema = z.object({
  profile: z.any().refine((files) => files?.length == 1, 'LinkedIn profile PDF is required.'),
});

type FormValues = z.infer<typeof formSchema>;

export function LinkedInOptimizerClient() {
  const [analysisResult, setAnalysisResult] = useState<any | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const { toast } = useToast();
  const { user } = useAuth();

  const form = useForm<FormValues>({
    resolver: zodResolver(formSchema),
  });

  async function onSubmit(values: FormValues) {
    if (!user) {
      toast({ variant: 'destructive', title: 'You must be logged in.' });
      return;
    }
    setIsLoading(true);
    setAnalysisResult(null);

    const formData = new FormData();
    formData.append('profile', values.profile[0]);

    try {
      const response = await fetch(`${API_BASE_URL}/linkedin-optimizer`, {
        method: 'POST',
        body: formData,
      });

      if (!response.ok) {
        throw new Error('Failed to get analysis from the server.');
      }

      const result = await response.json();
      setAnalysisResult(result);
    } catch (error) {
      toast({
        variant: 'destructive',
        title: 'Analysis Failed',
        description: 'Could not get analysis. Please ensure the backend server is running and try again.',
      });
      setAnalysisResult(null);
    } finally {
      setIsLoading(false);
    }
  }

  return (
    <div className="flex w-full justify-center">
      <div className="w-full max-w-2xl flex flex-col gap-6">
        <Card>
          <CardHeader>
            <CardTitle>LinkedIn Optimizer</CardTitle>
            <CardDescription>Upload a PDF of your LinkedIn profile to receive AI-driven optimization tips.</CardDescription>
          </CardHeader>
          <CardContent>
            <Alert className="mb-6">
              <Lightbulb className="h-4 w-4" />
              <AlertTitle>How to Download Your LinkedIn Profile</AlertTitle>
              <AlertDescription>
                <ol className="list-decimal list-inside space-y-1 mt-2">
                  <li>Go to your LinkedIn profile page.</li>
                  <li>Click the <strong>More</strong> button in your introduction card.</li>
                  <li>Select <strong>Save to PDF</strong> from the dropdown menu.</li>
                </ol>
              </AlertDescription>
            </Alert>
            <Form {...form}>
              <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-6">
                <FormField
                  control={form.control}
                  name="profile"
                  render={({ field }) => (
                    <FormItem>
                      <FormLabel>LinkedIn Profile PDF</FormLabel>
                      <FormControl>
                        <Input type="file" accept="application/pdf" onChange={(e) => field.onChange(e.target.files)} />
                      </FormControl>
                      <FormMessage />
                    </FormItem>
                  )}
                />
                <Button type="submit" disabled={isLoading} className="w-full">
                  {isLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <Sparkles className="mr-2 h-4 w-4" />}
                  Optimize Profile
                </Button>
              </form>
            </Form>
          </CardContent>
        </Card>

        <Card>
          <CardHeader>
            <CardTitle>Optimization Results</CardTitle>
            <CardDescription>Your profile feedback will appear here.</CardDescription>
          </CardHeader>
          <CardContent>
            {isLoading && (
              <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center">
                <Loader2 className="h-12 w-12 animate-spin text-primary" />
                <p className="text-muted-foreground">Optimizing your profile... This may take a moment.</p>
              </div>
            )}
            {analysisResult ? (
              <div className="space-y-6">
                <div className="flex justify-center">
                  <ScoreGauge score={analysisResult.profileStrengthScore} />
                </div>
                <Accordion type="single" collapsible defaultValue="headline" className="w-full">
                  <AccordionItem value="headline">
                    <AccordionTrigger>Headline Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.headlineFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="summary">
                    <AccordionTrigger>Summary Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.summaryFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="experience">
                    <AccordionTrigger>Experience Feedback</AccordionTrigger>
                    <AccordionContent>{analysisResult.experienceFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="skills">
                    <AccordionTrigger>Skills & Endorsements</AccordionTrigger>
                    <AccordionContent>{analysisResult.skillsFeedback}</AccordionContent>
                  </AccordionItem>
                  <AccordionItem value="activity">
                    <AccordionTrigger>Activity & Engagement</AccordionTrigger>
                    <AccordionContent>{analysisResult.activityFeedback}</AccordionContent>
                  </AccordionItem>
                </Accordion>
                <Alert>
                  <Lightbulb className="h-4 w-4" />
                  <AlertTitle>Keyword Suggestions</AlertTitle>
                  <AlertDescription>{analysisResult.keywordSuggestions}</AlertDescription>
                </Alert>
                <Alert>
                  <Lightbulb className="h-4 w-4" />
                  <AlertTitle>Overall Suggestions</AlertTitle>
                  <AlertDescription>{analysisResult.overallSuggestions}</AlertDescription>
                </Alert>
              </div>
            ) : !isLoading && (
              <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center">
                <Linkedin className="h-12 w-12 text-muted-foreground" />
                <p className="text-muted-foreground">Your results will be shown here after optimization.</p>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
```

#### **File to update: `src/components/dashboard/github-analyzer-client.tsx`**

This update connects the GitHub Analyzer to your `/api/github-analyzer/...` endpoints.

```tsx
'use client';

import { useState } from 'react';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import * as z from 'zod';
import { useAuth } from '@/contexts/auth-context';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';
import { Input } from '@/components/ui/input';
import { Button } from '@/components/ui/button';
import { useToast } from '@/hooks/use-toast';
import { Loader2, Sparkles, Github, Code, BookOpen, Lightbulb } from 'lucide-react';
import { MermaidChart } from '../mermaid-chart';
import { Alert, AlertDescription, AlertTitle } from '../ui/alert';
import { Avatar, AvatarFallback, AvatarImage } from '../ui/avatar';
import { Separator } from '../ui/separator';

const API_BASE_URL = 'http://localhost:8000/api';

const profileSchema = z.object({
  githubUsername: z.string().min(1, 'GitHub username is required.'),
});
const repoSchema = z.object({
  repositoryUrl: z.string().url('Please enter a valid GitHub repository URL.'),
});

type ProfileFormValues = z.infer<typeof profileSchema>;
type RepoFormValues = z.infer<typeof repoSchema>;

interface GithubProfile {
    name: string;
    avatar_url: string;
    public_repos: number;
    followers: number;
    following: number;
}

export function GithubAnalyzerClient() {
  const [activeTab, setActiveTab] = useState('profile');
  const [profileResult, setProfileResult] = useState<any | null>(null);
  const [repoResult, setRepoResult] = useState<any | null>(null);
  const [githubProfile, setGithubProfile] = useState<GithubProfile | null>(null);
  const [isProfileLoading, setIsProfileLoading] = useState(false);
  const [isRepoLoading, setIsRepoLoading] = useState(false);
  const { toast } = useToast();
  const { user } = useAuth();

  const profileForm = useForm<ProfileFormValues>({ resolver: zodResolver(profileSchema) });
  const repoForm = useForm<RepoFormValues>({ resolver: zodResolver(repoSchema) });
  
  async function fetchGitHubProfile(username: string) {
    try {
        const response = await fetch(`https://api.github.com/users/${username}`);
        if (!response.ok) {
            throw new Error('User not found or GitHub API limit exceeded.');
        }
        const data = await response.json();
        setGithubProfile(data);
    } catch (error) {
        toast({
            variant: 'destructive',
            title: 'Error Fetching Profile',
            description: 'Could not fetch basic data from GitHub. The username may be invalid.',
        });
        setGithubProfile(null);
    }
  }

  async function onProfileSubmit(values: ProfileFormValues) {
    if (!user) return;
    setIsProfileLoading(true);
    setProfileResult(null);
    setGithubProfile(null);

    await fetchGitHubProfile(values.githubUsername);

    try {
        const response = await fetch(`${API_BASE_URL}/github-analyzer/profile`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ githubUsername: values.githubUsername }),
        });
        if (!response.ok) throw new Error('Failed to get analysis.');
        const result = await response.json();
        setProfileResult(result);
    } catch (error) {
        toast({
            variant: 'destructive',
            title: 'AI Analysis Failed',
            description: 'Could not get AI analysis. Please ensure the backend server is running.',
        });
        setProfileResult(null);
    } finally {
        setIsProfileLoading(false);
    }
  }

  async function onRepoSubmit(values: RepoFormValues) {
    if (!user) return;
    setIsRepoLoading(true);
    setRepoResult(null);
    try {
        const response = await fetch(`${API_BASE_URL}/github-analyzer/repository`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ repositoryUrl: values.repositoryUrl }),
        });
        if (!response.ok) throw new Error('Failed to get analysis.');
        const result = await response.json();
        setRepoResult(result);
    } catch (error) {
         toast({
            variant: 'destructive',
            title: 'Analysis Failed',
            description: 'Could not get repository analysis. Please ensure the backend server is running.',
        });
        setRepoResult(null);
    } finally {
        setIsRepoLoading(false);
    }
  }

  const renderResults = (type: 'profile' | 'repo') => {
    if (type === 'profile') {
      if (isProfileLoading) return <div className="flex justify-center p-8"><Loader2 className="h-12 w-12 animate-spin text-primary" /></div>;
      if (!profileResult && !githubProfile) return <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center"><Github className="h-12 w-12 text-muted-foreground" /><p>Profile analysis results will appear here.</p></div>;
      return (
        <div className="space-y-6">
          {githubProfile && (
            <Card>
              <CardHeader className="flex flex-col items-center text-center">
                <Avatar className="h-24 w-24 border-4 border-primary/20">
                  <AvatarImage src={githubProfile.avatar_url} alt={githubProfile.name} />
                  <AvatarFallback>{githubProfile.name?.charAt(0)}</AvatarFallback>
                </Avatar>
                <CardTitle className="mt-4 text-2xl">{githubProfile.name}</CardTitle>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-3 divide-x text-center">
                  <div className="px-2"><p className="text-2xl font-bold">{githubProfile.public_repos}</p><p className="text-sm text-muted-foreground">Repositories</p></div>
                  <div className="px-2"><p className="text-2xl font-bold">{Intl.NumberFormat('en-US', { notation: 'compact' }).format(githubProfile.followers)}</p><p className="text-sm text-muted-foreground">Followers</p></div>
                  <div className="px-2"><p className="text-2xl font-bold">{githubProfile.following}</p><p className="text-sm text-muted-foreground">Following</p></div>
                </div>
              </CardContent>
            </Card>
          )}
          {profileResult && (
            <>
              <Separator />
              <div className="space-y-4">
                <Alert><Code className="h-4 w-4" /><AlertTitle>Tech Stack</AlertTitle><AlertDescription>{profileResult.techStack}</AlertDescription></Alert>
                <Alert><Code className="h-4 w-4" /><AlertTitle>Code Quality Insights</AlertTitle><AlertDescription>{profileResult.codeQualityInsights}</AlertDescription></Alert>
                {profileResult.languageDistributionChart && <Card><CardHeader><CardTitle>Language Distribution</CardTitle></CardHeader><CardContent><MermaidChart chart={profileResult.languageDistributionChart} /></CardContent></Card>}
                {profileResult.repositoryCreationActivityChart && <Card><CardHeader><CardTitle>Repo Creation Activity</CardTitle></CardHeader><CardContent><MermaidChart chart={profileResult.repositoryCreationActivityChart} /></CardContent></Card>}
                <Alert><Lightbulb className="h-4 w-4" /><AlertTitle>Overall Suggestions</AlertTitle><AlertDescription>{profileResult.overallSuggestions}</AlertDescription></Alert>
              </div>
            </>
          )}
        </div>
      );
    } else {
      if (isRepoLoading) return <div className="flex justify-center p-8"><Loader2 className="h-12 w-12 animate-spin text-primary" /></div>;
      if (!repoResult) return <div className="flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed p-8 text-center"><BookOpen className="h-12 w-12 text-muted-foreground" /><p>Repository analysis results will appear here.</p></div>;
      return (
        <div className="space-y-4">
          <Alert><BookOpen className="h-4 w-4" /><AlertTitle>Purpose Feedback</AlertTitle><AlertDescription>{repoResult.purposeFeedback}</AlertDescription></Alert>
          <Alert><BookOpen className="h-4 w-4" /><AlertTitle>Documentation Quality</AlertTitle><AlertDescription>{repoResult.documentationQualityFeedback}</AlertDescription></Alert>
          <Alert><Lightbulb className="h-4 w-4" /><AlertTitle>Overall Suggestions</AlertTitle><AlertDescription>{repoResult.overallSuggestions}</AlertDescription></Alert>
        </div>
      );
    }
  };

  return (
    <div className="flex w-full justify-center">
      <div className="w-full max-w-2xl flex flex-col gap-6">
        <Tabs defaultValue="profile" onValueChange={setActiveTab} className="w-full">
          <TabsList className="grid w-full grid-cols-2">
            <TabsTrigger value="profile">Profile Analyzer</TabsTrigger>
            <TabsTrigger value="repository">Repository Analyzer</TabsTrigger>
          </TabsList>
          <div className="mt-6 flex flex-col gap-6">
            <TabsContent value="profile" className="m-0">
              <Card>
                <CardHeader>
                  <CardTitle>Profile Analyzer</CardTitle>
                  <CardDescription>Enter a GitHub username to analyze their profile.</CardDescription>
                </CardHeader>
                <CardContent>
                  <Form {...profileForm}>
                    <form onSubmit={profileForm.handleSubmit(onProfileSubmit)} className="space-y-4">
                      <FormField control={profileForm.control} name="githubUsername" render={({ field }) => (
                        <FormItem>
                          <FormLabel>GitHub Username</FormLabel>
                          <FormControl><Input placeholder="e.g., torvalds" {...field} /></FormControl>
                          <FormMessage />
                        </FormItem>
                      )} />
                      <Button type="submit" disabled={isProfileLoading} className="w-full">
                        {isProfileLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <Sparkles className="mr-2 h-4 w-4" />}
                        Analyze Profile
                      </Button>
                    </form>
                  </Form>
                </CardContent>
              </Card>
            </TabsContent>
            <TabsContent value="repository" className="m-0">
              <Card>
                <CardHeader>
                  <CardTitle>Repository Analyzer</CardTitle>
                  <CardDescription>Enter a public GitHub repository URL for analysis.</CardDescription>
                </CardHeader>
                <CardContent>
                  <Form {...repoForm}>
                    <form onSubmit={repoForm.handleSubmit(onRepoSubmit)} className="space-y-4">
                      <FormField control={repoForm.control} name="repositoryUrl" render={({ field }) => (
                        <FormItem>
                          <FormLabel>Repository URL</FormLabel>
                          <FormControl><Input placeholder="https://github.com/torvalds/linux" {...field} /></FormControl>
                          <FormMessage />
                        </FormItem>
                      )} />
                      <Button type="submit" disabled={isRepoLoading} className="w-full">
                        {isRepoLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : <Sparkles className="mr-2 h-4 w-4" />}
                        Analyze Repository
                      </Button>
                    </form>
                  </Form>
                </CardContent>
              </Card>
            </TabsContent>
          </div>
        </Tabs>
        <Card>
          <CardHeader>
            <CardTitle>Analysis Results</CardTitle>
            <CardDescription>
              {activeTab === 'profile' ? 'Profile insights will appear here.' : 'Repository insights will appear here.'}
            </CardDescription>
          </CardHeader>
          <CardContent>
            {renderResults(activeTab as 'profile' | 'repo')}
          </CardContent>
        </Card>
      </div>
    </div>
  );
}
```
